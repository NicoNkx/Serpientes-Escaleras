export const questions = [
  {
    pregunta: "Carlos, 45 años, oficinista con dolor lumbar crónico por malas posturas prolongadas. No presenta enfermedades cardiovasculares ni dispositivos electrónicos implantados.",
    opciones: [
      "Diatermia capacitiva o resistiva, indicada en dolor musculoesquelético crónico, aumento del metabolismo, analgesia, relajación muscular, potencia media; 15–20 minutos; 2-3 sesiones por semana, la diatermia facilita la relajación muscular y reduce el dolor por contractura y mala postura sin riesgos asociados.",
      "Microondas de alta potencia, Indicada en lesiones agudas con edema, Aumento de inflamación y dolor, Potencia alta; 30 minutos; diario, Se busca provocar una respuesta inflamatoria fuerte para acelerar el proceso",
      "Ultrasonido terapéutico, Indicada sólo en casos postquirúrgicos recientes, Disminuye el colágeno y la vascularización, Potencia muy baja; 5 minutos, Se prefiere evitar el calor en cualquier fase crónica",
      "Capacitiva de alta frecuencia sin control térmico, Indicada solo si hay espasmos visibles, Irritación cutánea y contractura refleja, 20 minutos; 3 sesiones diarias, Se aplica calor intenso para forzar la relajación"
    ],
    respuestaCorrecta: "Diatermia capacitiva o resistiva, indicada en dolor musculoesquelético crónico, aumento del metabolismo, analgesia, relajación muscular, potencia media; 15–20 minutos; 2-3 sesiones por semana, la diatermia facilita la relajación muscular y reduce el dolor por contractura y mala postura sin riesgos asociados."
  },
  {
    pregunta: "María, 68 años, con artrosis leve en la rodilla derecha. Refiere dolor constante, pero usa marcapasos por antecedentes cardíacos.",
    opciones: [
      "No debe aplicarse, Contraindicada por uso de marcapasos, Podría haber riesgo de interferencia con el dispositivo cardíaco, Aunque hay dolor articular, la diatermia está contraindicada en pacientes con marcapasos por riesgo de alteración en su funcionamiento",
      "Capacitiva de alta frecuencia, Indicada en pacientes con dolor articular y marcapasos si se usa en extremidades, Alivia el dolor sin afectar el marcapasos, 15 minutos; potencia media, Se puede aplicar con cuidado y distancia del tórax",
      "Inductiva, Indicada en artrosis sin importar marcapasos, Estimula la conducción eléctrica, Potencia máxima durante 20 minutos, Se busca estimular el ritmo cardíaco y mejorar el flujo local",
      "Resistiva, Recomendada si el marcapasos está inactivo, Aumenta la contracción cardíaca, 20 minutos, 5 veces por semana, Se puede emplear si se monitorea el ritmo cardíaco"
    ],
    respuestaCorrecta: "No debe aplicarse, Contraindicada por uso de marcapasos, Podría haber riesgo de interferencia con el dispositivo cardíaco, Aunque hay dolor articular, la diatermia está contraindicada en pacientes con marcapasos por riesgo de alteración en su funcionamiento"
  },
  {
    pregunta: "Luis, 28 años, refiere dolor y rigidez en el trapecio superior derecho. No hay antecedentes clínicos relevantes. Trabaja bajo estrés constante.",
    opciones: [
      "Capacitiva superficial-media, Indicada en contracturas musculares; sin contraindicaciones, Relajación muscular, aumento del flujo sanguíneo, analgesia local, Potencia baja-media; duración de 10–15 minutos, La diatermia permite reducir el tono muscular y mejorar el estado funcional de la zona afectada por tensión emocional",
      "Inductiva profunda, Contraindicada por edad joven, Genera rigidez y contractura adicional, Potencia alta durante 25 minutos, Se intenta generar una sobrecarga térmica para relajación",
      "Microondas, Indicada sólo en estructuras óseas, Aumenta la actividad nerviosa, 10 minutos, alta potencia, Estimula los huesos para que relajen el músculo",
      "Capacitiva localizada y contraste con frío, Contraindicada por estrés emocional, Disminuye la temperatura y aumenta la contractura, 15 minutos con potencia mínima, Aplicar frío junto a diatermia para confundir la señal nerviosa"
    ],
    respuestaCorrecta: "Capacitiva superficial-media, Indicada en contracturas musculares; sin contraindicaciones, Relajación muscular, aumento del flujo sanguíneo, analgesia local, Potencia baja-media; duración de 10–15 minutos, La diatermia permite reducir el tono muscular y mejorar el estado funcional de la zona afectada por tensión emocional"
  },
  {
    pregunta: "Sofía, 21 años, sufre esguince de tobillo grado I hace 24 horas. Presenta inflamación y dolor en la zona.",
    opciones: [
      "No indicada en fase aguda, Contraindicada en procesos inflamatorios agudos, El calor podría aumentar la inflamación y el edema, La diatermia está contraindicada en lesiones agudas ya que el calor puede agravar la inflamación y prolongar la recuperación",
      "Capacitiva de alta frecuencia, Indicada para activar circulación desde el primer día, Reduce la inflamación por vasodilatación excesiva, Potencia media; 20 minutos, El calor favorece la respuesta inmunológica local",
      "Inductiva profunda, Indicada en edema para movilizar líquidos, Evapora el líquido intersticial mediante calor profundo, Potencia alta; 25 minutos; 1 vez al día, La inducción electromagnética dispersa el edema rápidamente",
      "Microondas localizada, Indicada en primeras 48 h post-lesión, Reduce espasmo y dolor agudo, 10 minutos, potencia alta, diaria, Calentar desde el inicio acelera la recuperación"
    ],
    respuestaCorrecta: "No indicada en fase aguda, Contraindicada en procesos inflamatorios agudos, El calor podría aumentar la inflamación y el edema, La diatermia está contraindicada en lesiones agudas ya que el calor puede agravar la inflamación y prolongar la recuperación"
  },
  {
    pregunta: "Andrés, 50 años, con dolor articular en cadera derecha por metástasis ósea confirmada. Consulta por alternativas para manejo del dolor.",
    opciones: [
      "Contraindicada completamente, Contraindicada en pacientes oncológicos con tumores activos, Riesgo de estimular la proliferación tumoral por el aumento del metabolismo y vascularización, Aunque el paciente presenta dolor, la diatermia está prohibida en presencia de tumores por el riesgo de acelerar su crecimiento",
      "Capacitiva de baja intensidad, Aplicable si el tumor no está en contacto directo con el campo, Estimula defensas y alivia dolor, 15 minutos, baja potencia, 3 veces por semana, Si se evita la zona del tumor, se puede aplicar con seguridad",
      "Inductiva general, Indicada para dolor crónico, sin importar etiología, Activa circulación sin interferir en células tumorales, 20 minutos, 4 veces por semana, Alivia el dolor crónico de cualquier origen",
      "Microondas segmentaria, Útil para analgesia paliativa en zonas oncológicas, Reduce el dolor mediante activación nerviosa controlada, 15 minutos diarios, potencia moderada, Uso controlado ayuda en cuidados paliativos"
    ],
    respuestaCorrecta: "Contraindicada completamente, Contraindicada en pacientes oncológicos con tumores activos, Riesgo de estimular la proliferación tumoral por el aumento del metabolismo y vascularización, Aunque el paciente presenta dolor, la diatermia está prohibida en presencia de tumores por el riesgo de acelerar su crecimiento"
  },
  {
    pregunta: "Valentina, 35 años, deportista aficionada, presenta dolor muscular leve en muslo posterior tras entrenamiento intenso. No hay lesión diagnosticada ni contraindicación.",
    opciones: [
      "Diatermia resistiva superficial-media, Indicada en sobrecarga muscular leve, Mejora metabolismo local, oxigenación y recuperación, Potencia media durante 15 minutos, 2–3 veces por semana, Permite acelerar la recuperación sin riesgo térmico al no haber lesión estructural",
      "Capacitiva profunda, Indicada en traumatismos óseos, Estimula osteoblastos, 25 minutos de alta potencia, Se busca regenerar tejido óseo tras impacto",
      "Inductiva máxima, Aplicación recomendada solo si hay rotura, Genera microrroturas que mejoran el músculo, 30 minutos diarios, La potencia alta mejora adaptación muscular",
      "No indicada en actividad deportiva, Contraindicada en músculos entrenados, Genera fatiga y disminución del rendimiento, Calor residual perjudica el metabolismo energético"
    ],
    respuestaCorrecta: "Diatermia resistiva superficial-media, Indicada en sobrecarga muscular leve, Mejora metabolismo local, oxigenación y recuperación, Potencia media durante 15 minutos, 2–3 veces por semana, Permite acelerar la recuperación sin riesgo térmico al no haber lesión estructural"
  },
  {
    pregunta: "Jorge, 73 años, con rigidez y dolor en hombro derecho por capsulitis adhesiva (hombro congelado). No tiene marcapasos ni implantes metálicos.",
    opciones: [
      "Diatermia resistiva profunda, Indicada en capsulitis adhesiva, Mejora elasticidad capsular, vascularización y analgesia, Potencia media-alta, 15–20 minutos; 3 veces por semana, El calor profundo permite mayor movilidad y analgesia en estructuras capsulares",
      "Capacitiva ligera, Contraindicada por edad avanzada, Riesgo de hipotensión post-tratamiento, 10 minutos de baja potencia, La edad impide aplicar calor sin supervisión",
      "Inductiva superficial, Solo útil en dolor cutáneo, No penetra suficiente para acción articular, 20 minutos diarios, Se limita a tratar la piel",
      "Microondas intensa, Indicada en casos postoperatorios, Provoca calor focal profundo no controlable, Potencia alta durante 25 minutos, La radiación mejora la movilidad sin afectar estructuras"
    ],
    respuestaCorrecta: "Diatermia resistiva profunda, Indicada en capsulitis adhesiva, Mejora elasticidad capsular, vascularización y analgesia, Potencia media-alta, 15–20 minutos; 3 veces por semana, El calor profundo permite mayor movilidad y analgesia en estructuras capsulares"
  },
  {
    pregunta: "Camila, 32 años, refiere dolor pélvico por dismenorrea funcional. No hay signos de patología ginecológica ni dispositivos implantados.",
    opciones: [
      "Diatermia capacitiva baja, Indicada en dismenorrea funcional, Produce relajación del músculo uterino y analgesia, Potencia baja, 10–15 minutos; días previos y durante menstruación, Aplicación abdominal suave mejora el confort sin efectos secundarios",
      "Resistiva profunda, Contraindicada en área abdominal femenina, Riesgo de alteración ovárica, 20 minutos alta potencia, El calor puede alterar la fertilidad",
      "Inductiva general, Indicada si hay dolor visceral, Provoca contracción uterina controlada, 25 minutos, 4 veces semanales, Aumenta la evacuación del endometrio",
      "Microondas, Contraindicada en mujeres en edad fértil, Podría afectar estructuras ováricas, 15 minutos, 2 veces al mes, Riesgo hormonal elevado"
    ],
    respuestaCorrecta: "Diatermia capacitiva baja, Indicada en dismenorrea funcional, Produce relajación del músculo uterino y analgesia, Potencia baja, 10–15 minutos; días previos y durante menstruación, Aplicación abdominal suave mejora el confort sin efectos secundarios"
  },
  {
    pregunta: "Federico, 60 años, postoperatorio reciente de prótesis de rodilla (15 días). Presenta rigidez y dolor leve. No hay signos de infección.",
    opciones: [
      "No aplicar aún, Contraindicada en fase postoperatoria temprana, Riesgo de alterar proceso inflamatorio y cicatrización, Aún no es momento para generar calor profundo, ya que se podrían afectar los procesos de regeneración tisular",
      "Diatermia resistiva, Aplicable desde la primera semana, Mejora el sellado protésico y analgesia, 15 minutos, media potencia, El calor favorece la fijación de la prótesis",
      "Capacitiva profunda, Indicada en dolor postquirúrgico reciente, El calor acelera la cicatrización, 20 minutos; diaria, Reduce el tiempo de inmovilización",
      "Inductiva focal, Aplicación sobre la prótesis directamente, Estimula integración ósea, 30 minutos, potencia alta, El campo electromagnético fija mejor la prótesis"
    ],
    respuestaCorrecta: "No aplicar aún, Contraindicada en fase postoperatoria temprana, Riesgo de alterar proceso inflamatorio y cicatrización, Aún no es momento para generar calor profundo, ya que se podrían afectar los procesos de regeneración tisular"
  },
  {
    pregunta: "Daniela, 40 años, refiere dolor crónico en región lumbar. Presenta un DIU (dispositivo intrauterino) de cobre.",
    opciones: [
      "Puede aplicarse con precaución, Capacitiva superficial, Calor local sin alcanzar pelvis, Potencia baja, 10 minutos, 2 veces por semana, Evitar campos profundos cerca del DIU, pero zonas lumbares altas son seguras",
      "Contraindicada, Cualquier tipo de diatermia, Riesgo de desplazamiento del DIU, El calor puede derretir el dispositivo, 20 minutos media potencia",
      "Inductiva profunda, Aconsejada por penetrar hasta columna, No interactúa con metales, 25 minutos, potencia alta, El campo magnético estabiliza el DIU",
      "Microondas pélvica, Ideal para pacientes con dispositivos intrauterinos, El calor destruye microorganismos, 30 minutos, 3 veces semanales, Calor profundo protege el aparato reproductor"
    ],
    respuestaCorrecta: "Puede aplicarse con precaución, Capacitiva superficial, Calor local sin alcanzar pelvis, Potencia baja, 10 minutos, 2 veces por semana, Evitar campos profundos cerca del DIU, pero zonas lumbares altas son seguras"
  }
];


// Función para barajar las preguntas aleatoriamente (Fisher-Yates shuffle)
function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]]; // Intercambiar
  }
  return arr;
}

// Barajar las preguntas cada vez que se importa
const shuffledQuestions = shuffleArray(questions);

// Lógica para hacer la pregunta y devolver la respuesta
export const askQuestion = (questions) => {
  return new Promise((resolve) => {
    if (!questions.length) {
      resolve({ correcta: false }); // si no hay preguntas, devuelve incorrecta
      return;
    }

    const pregunta = questions[Math.floor(Math.random() * questions.length)];

    const modal = document.createElement("div");
    modal.className = "fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50";

    modal.innerHTML = `
      <div class="bg-white p-6 rounded-xl shadow-md max-w-2xl max-h-[80vh] overflow-y-auto text-left space-y-4">
        <h2 class="text-lg font-semibold text-gray-800">${pregunta.pregunta}</h2>
        <div class="space-y-2">
          ${pregunta.opciones.map((op, idx) => `
            <button data-index="${idx}" class="block w-full text-left my-1 p-3 bg-red-100 rounded hover:bg-red-200">
              ${op}
            </button>
          `).join('')}
        </div>
      </div>
    `;

    document.body.appendChild(modal);

    modal.querySelectorAll("button").forEach(btn => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-index"));
        const correcta = pregunta.respuestaCorrecta === pregunta.opciones[index];
        modal.remove();
        resolve({ correcta });
      });
    });
  });
};
